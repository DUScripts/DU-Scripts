{"slots":{"0":{"name":"container","type":{"events":[],"methods":[]}},"1":{"name":"slot2","type":{"events":[],"methods":[]}},"2":{"name":"slot3","type":{"events":[],"methods":[]}},"3":{"name":"slot4","type":{"events":[],"methods":[]}},"4":{"name":"slot5","type":{"events":[],"methods":[]}},"5":{"name":"slot6","type":{"events":[],"methods":[]}},"6":{"name":"slot7","type":{"events":[],"methods":[]}},"7":{"name":"slot8","type":{"events":[],"methods":[]}},"8":{"name":"slot9","type":{"events":[],"methods":[]}},"9":{"name":"slot10","type":{"events":[],"methods":[]}},"-1":{"name":"unit","type":{"events":[],"methods":[]}},"-2":{"name":"system","type":{"events":[],"methods":[]}},"-3":{"name":"library","type":{"events":[],"methods":[]}}},"handlers":[{"code":"containerTbl = json.decode(container.getItemsList())\n\nlocal oreTbl = {}\nfor i, v in pairs(containerTbl) do\n    table.insert(oreTbl, {[\"name\"]=v.name, [\"quantity\"]=math.floor(v.quantity)})\nend\n\nhtml = \"\"\nfor i, v in ipairs(oreTbl) do\n    if ores[v.name] ~= nil then\n        html = html..[[\n    <div class =\"element\">\n        <img src=']]..ores[v.name]..[[' class=\"image\">\n        <text>]]..formatNumber(v.quantity)..[[</text>\n    </div>\n]]\n    end\nend\n\nsystem.showScreen(1)\n\nhtml = [[\n<style>\n    .text {\n    font-size:4vh;\n    line-height:4vh;\n    font-weight:bold;\n    font-family:Montserrat;\n    color:white;\n    -webkit-text-stroke: 1.5vh black;\n    width: 36vh;\n    text-allign: right:\n    }\n    \n    .element {\n    width: 26vh;\n    text-align:right;\n    }\n    \n    .image {\n    width:4vh;\n    height:4vh;\n    left:0;\n    position:absolute;\n    }\n\n</style>\n\n<ul class=\"text\">\n]]..html..[[\n</ul>\n]]\n\nsystem.setScreen(html)","filter":{"args":[],"signature":"storageAcquired()","slotKey":"0"},"key":"0"},{"code":"json = require (\"dkjson\")\n\nfunction formatNumber(number)\n    \n    local text = string.reverse(string.reverse(tostring(number)):gsub(\"(...)\", \"%1 \"))\n    \n    if string.sub(text, 1, 1) == \" \" then\n        text = string.sub(text, 2, -1)\n    end\n    \n    return text..\"L\"\nend\n\ncontainerTbl = \"\"\ntablelist = {}\n\nsystem.print(\"Ore Display v1.0\")\n\ncontainer.acquireStorage()\nunit.setTimer(\"update\",30)","filter":{"args":[],"signature":"start()","slotKey":"-1"},"key":"1"},{"code":"container.acquireStorage()","filter":{"args":[{"value":"update"}],"signature":"tick(timerId)","slotKey":"-1"},"key":"2"},{"code":"ores = {\n    [\"Bauxite\"] = \"resources_generated/iconsLib/materialslib/aluminium_ore.png\",\n    [\"Coal\"] = \"resources_generated/iconsLib/materialslib/CarbonOre.png\",\n    [\"Hematite\"] = \"resources_generated/iconsLib/materialslib/iron_ore.png\",\n    [\"Quartz\"] = \"resources_generated/iconsLib/materialslib/silicon_ore.png\",\n    [\"Natron\"] = \"resources_generated/iconsLib/materialslib/SodiumOre.png\",\n    [\"Malachite\"] = \"resources_generated/iconsLib/materialslib/copper_ore.png\",\n    [\"Chromite\"] = \"resources_generated/iconsLib/materialslib/ChromiumOre.png\",\n    [\"Limestone\"] = \"resources_generated/iconsLib/materialslib/CalciumOre.png\",\n    [\"Garnierite\"] = \"resources_generated/iconsLib/materialslib/NickelOre.png\",\n    [\"Pyrite\"] = \"resources_generated/iconsLib/materialslib/SulfurOre.png\",\n    [\"Acanthite\"] = \"resources_generated/iconsLib/materialslib/SilverOre.png\",\n    [\"Petalite\"] = \"resources_generated/iconsLib/materialslib/LithiumOre.png\",\n    [\"Cobaltite\"] = \"resources_generated/iconsLib/materialslib/CobaltOre.png\",\n    [\"FluorineOre\"] = \"resources_generated/iconsLib/materialslib/FluorineOre.png\",\n    [\"Gold nuggets\"] = \"resources_generated/iconsLib/materialslib/gold_ore.png\",\n    [\"Kolbeckite\"] = \"resources_generated/iconsLib/materialslib/scandium_ore.png\",\n    [\"Columbite\"] = \"resources_generated/iconsLib/materialslib/NiobiumOre.png\",\n    [\"Rhodonite\"] = \"resources_generated/iconsLib/materialslib/manganese_ore.png\",\n    [\"Illmenite\"] = \"resources_generated/iconsLib/materialslib/TitaniumOre.png\",\n    [\"Vanadinite\"] = \"resources_generated/iconsLib/materialslib/VanadiumOre.png\",\n    [\"Thoramine\"] = \"resources_generated/iconsLib/materialslib/env_thoramine-ore_001_icon.png\"\n}","filter":{"args":[],"signature":"start()","slotKey":"-3"},"key":"3"}],"methods":[],"events":[]}
